---
import invariant from "tiny-invariant";
import { keystatic } from "@lib/keystatic/client";
import { Icon } from "astro-icon/components";
import Button from "./Button.astro";

const i18n = await keystatic.singletons.nav.read({
  resolveLinkedFiles: true,
});
invariant(i18n, "No homepage content found");
---

<nav class="flex items-center justify-between bg-white p-4 pixelated-border-double border-8 border-black mt-10 mx-20">
  <!-- Logo Section -->
  <div class="flex items-center">
    <div class="pixelated-border-2 border-black bg-black text-white px-3 py-2 font-bold text-xl font-display">
      P
    </div>
  </div>

  <!-- Navigation Links -->
  <div class="flex items-center space-x-8">
    {
      i18n.navigationLinks.map((link) => (
        <a
          href={link.href}
          target={link.newTab ? "_blank" : undefined}
          rel={link.newTab ? "noopener noreferrer" : undefined}
          class="font-medium text-black font-display hover:text-gray-600 transition-colors duration-200"
        >
          {link.label}
        </a>
      ))
    }
  </div>

  <!-- CTA Button -->
  {
    i18n.ctaButton.enabled && (
      <Button
        as="a"
        href={i18n.ctaButton.href}
        target={i18n.ctaButton.newTab ? "_blank" : undefined}
        rel={i18n.ctaButton.newTab ? "noopener noreferrer" : undefined}
        class="bg-malibu-400 text-white font-medium text-lg font-display px-4 py-2 hover:bg-malibu-500 transition-colors duration-200 pixelated-border-single"
        borderWidth="1"
      >
        {i18n.ctaButton.label} <Icon name="bi:arrow-right-short" class="inline-block h-6 w-6" />
      </Button>
    )
  }
</nav>
